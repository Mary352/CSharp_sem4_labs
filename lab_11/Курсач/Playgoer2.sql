use master  
go
create database Playgoer2
on primary
( name = N'Playgoer2_mdf', filename = N'D:\4 сем\Курсач\Playgoer\Playgoer2_mdf.mdf', 
   size = 5120Kb, maxsize = 10240Kb, filegrowth = 1024Kb),
( name = N'Playgoer2_ndf', filename = N'D:\4 сем\Курсач\Playgoer\Playgoer2_ndf.ndf', 
   size = 5120Kb, maxsize = 10240Kb, filegrowth = 10%)
go

use Playgoer2;

create table Users (
Id uniqueidentifier primary key DEFAULT newid(),
Nickname varchar(max) not null,
[Login] varchar(max) not null,
[Password] varchar(max) not null,
Email varchar(max) not null
);

create table Theaters (
Id uniqueidentifier primary key DEFAULT newid(),
TName varchar(max) not null,
City varchar(max) not null,
[Address] varchar(max) not null,
Phone varchar(20) not null
);

create table Seats (
Id uniqueidentifier primary key DEFAULT newid(),
Sector varchar(10) not null,
[Row] int not null,
SeatNum int not null,
Price float not null
);

create table Performances (
Id uniqueidentifier primary key DEFAULT newid(),
PName varchar(max) not null,
Genre varchar(35) not null,
Age int not null,
Duration int not null,
[Date_time] datetime not null,
TheaterId uniqueidentifier not null,
foreign key (TheaterId) 
	references Theaters (Id)
		on delete cascade
);

create table Tickets (
Id uniqueidentifier primary key DEFAULT newid(),
PerformanceId uniqueidentifier not null,
foreign key (PerformanceId) 
	references Performances (Id)
		on delete cascade,
SeatId uniqueidentifier not null,
foreign key (SeatId) 
	references Seats (Id)
		on delete cascade,
UserId uniqueidentifier not null,
foreign key (UserId) 
	references Users (Id)
		on delete cascade
);

insert into Seats (Sector, [Row], SeatNum, Price)
values	('Партер', 1, 1, 27),
		('Партер', 1, 2, 27),
		('Партер', 1, 3, 27),
		('Партер', 1, 4, 30),
		('Партер', 1, 5, 30),
		('Партер', 1, 6, 30),
		('Партер', 1, 7, 30),
		('Партер', 1, 8, 30),
		('Партер', 1, 9, 30),
		('Партер', 1, 10, 30),
		('Партер', 1, 11, 30),
		('Партер', 1, 12, 30),
		('Партер', 1, 13, 30),
		('Партер', 1, 14, 27),
		('Партер', 1, 15, 27),
		('Партер', 1, 16, 27),
		('Партер', 2, 1, 27),
		('Партер', 2, 2, 27),
		('Партер', 2, 3, 27),
		('Партер', 2, 4, 30),
		('Партер', 2, 5, 30),
		('Партер', 2, 6, 30),
		('Партер', 2, 7, 30),
		('Партер', 2, 8, 30),
		('Партер', 2, 9, 30),
		('Партер', 2, 10, 30),
		('Партер', 2, 11, 30),
		('Партер', 2, 12, 30),
		('Партер', 2, 13, 30),
		('Партер', 2, 14, 27),
		('Партер', 2, 15, 27),
		('Партер', 2, 16, 27),
		('Партер', 3, 1, 27),
		('Партер', 3, 2, 27),
		('Партер', 3, 3, 27),
		('Партер', 3, 4, 30),
		('Партер', 3, 5, 30),
		('Партер', 3, 6, 30),
		('Партер', 3, 7, 30),
		('Партер', 3, 8, 30),
		('Партер', 3, 9, 30),
		('Партер', 3, 10, 30),
		('Партер', 3, 11, 30),
		('Партер', 3, 12, 30),
		('Партер', 3, 13, 30),
		('Партер', 3, 14, 27),
		('Партер', 3, 15, 27),
		('Партер', 3, 16, 27),
		('Партер', 4, 1, 27),
		('Партер', 4, 2, 27),
		('Партер', 4, 3, 27),
		('Партер', 4, 4, 30),
		('Партер', 4, 5, 30),
		('Партер', 4, 6, 30),
		('Партер', 4, 7, 30),
		('Партер', 4, 8, 30),
		('Партер', 4, 9, 30),
		('Партер', 4, 10, 30),
		('Партер', 4, 11, 30),
		('Партер', 4, 12, 30),
		('Партер', 4, 13, 30),
		('Партер', 4, 14, 27),
		('Партер', 4, 15, 27),
		('Партер', 4, 16, 27),
		('Партер', 5, 1, 25),
		('Партер', 5, 2, 25),
		('Партер', 5, 3, 25),
		('Партер', 5, 4, 27),
		('Партер', 5, 5, 27),
		('Партер', 5, 6, 27),
		('Партер', 5, 7, 27),
		('Партер', 5, 8, 27),
		('Партер', 5, 9, 27),
		('Партер', 5, 10, 27),
		('Партер', 5, 11, 27),
		('Партер', 5, 12, 27),
		('Партер', 5, 13, 27),
		('Партер', 5, 14, 25),
		('Партер', 5, 15, 25),
		('Партер', 5, 16, 25),
		('Партер', 6, 1, 25),
		('Партер', 6, 2, 25),
		('Партер', 6, 3, 25),
		('Партер', 6, 4, 27),
		('Партер', 6, 5, 27),
		('Партер', 6, 6, 27),
		('Партер', 6, 7, 27),
		('Партер', 6, 8, 27),
		('Партер', 6, 9, 27),
		('Партер', 6, 10, 27),
		('Партер', 6, 11, 27),
		('Партер', 6, 12, 27),
		('Партер', 6, 13, 27),
		('Партер', 6, 14, 25),
		('Партер', 6, 15, 25),
		('Партер', 6, 16, 25),
		('Партер', 7, 1, 22),
		('Партер', 7, 2, 22),
		('Партер', 7, 3, 22),
		('Партер', 7, 4, 24),
		('Партер', 7, 5, 24),
		('Партер', 7, 6, 24),
		('Партер', 7, 7, 24),
		('Партер', 7, 8, 24),
		('Партер', 7, 9, 24),
		('Партер', 7, 10, 24),
		('Партер', 7, 11, 24),
		('Партер', 7, 12, 24),
		('Партер', 7, 13, 24),
		('Партер', 7, 14, 22),
		('Партер', 7, 15, 22),
		('Партер', 7, 16, 22),
		('Партер', 8, 1, 20),
		('Партер', 8, 2, 20),
		('Партер', 8, 3, 20),
		('Партер', 8, 4, 24),
		('Партер', 8, 5, 24),
		('Партер', 8, 6, 24),
		('Партер', 8, 7, 24),
		('Партер', 8, 8, 24),
		('Партер', 8, 9, 24),
		('Партер', 8, 10, 24),
		('Партер', 8, 11, 24),
		('Партер', 8, 12, 24),
		('Партер', 8, 13, 24),
		('Партер', 8, 14, 22),
		('Партер', 8, 15, 22),
		('Партер', 8, 16, 22),
		('Партер', 9, 1, 19),
		('Партер', 9, 2, 19),
		('Партер', 9, 3, 19),
		('Партер', 9, 4, 21),
		('Партер', 9, 5, 21),
		('Партер', 9, 6, 21),
		('Партер', 9, 7, 21),
		('Партер', 9, 8, 21),
		('Партер', 9, 9, 21),
		('Партер', 9, 10, 21),
		('Партер', 9, 11, 21),
		('Партер', 9, 12, 21),
		('Партер', 9, 13, 21),
		('Партер', 9, 14, 19),
		('Партер', 9, 15, 19),
		('Партер', 9, 16, 19),
		('Партер', 10, 1, 15),
		('Партер', 10, 2, 15),
		('Партер', 10, 3, 15),
		('Партер', 10, 4, 17),
		('Партер', 10, 5, 17),
		('Партер', 10, 6, 17),
		('Партер', 10, 7, 17),
		('Партер', 10, 8, 17),
		('Партер', 10, 9, 17),
		('Партер', 10, 10, 17),
		('Партер', 10, 11, 17),
		('Партер', 10, 12, 17),
		('Партер', 10, 13, 17),
		('Партер', 10, 14, 15),
		('Партер', 10, 15, 15),
		('Партер', 10, 16, 15),
		('Партер', 11, 1, 12),
		('Партер', 11, 2, 12),
		('Партер', 11, 3, 12),
		('Партер', 11, 4, 15),
		('Партер', 11, 5, 15),
		('Партер', 11, 6, 15),
		('Партер', 11, 7, 15),
		('Партер', 11, 8, 15),
		('Партер', 11, 9, 15),
		('Партер', 11, 10, 15),
		('Партер', 11, 11, 15),
		('Партер', 11, 12, 15),
		('Партер', 11, 13, 15),
		('Партер', 11, 14, 12),
		('Партер', 11, 15, 12),
		('Партер', 11, 16, 12),
		('Балкон', 1, 1, 10),
		('Балкон', 1, 2, 10),
		('Балкон', 1, 3, 10),
		('Балкон', 1, 4, 10),
		('Балкон', 1, 5, 10),
		('Балкон', 1, 6, 10),
		('Балкон', 1, 7, 10),
		('Балкон', 1, 8, 10);